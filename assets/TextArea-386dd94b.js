import{r as f,c as B,y as L,v as _,R as c,s as me,S as ge,B as pe,u as ye,q as O,ak as Se,i as $e,w as xe,j as ie}from"./index-7e4a4b07.js";function J(e){return!!(e.addonBefore||e.addonAfter)}function se(e){return!!(e.prefix||e.suffix||e.allowClear)}function ue(e,t,a,n){if(a){var r=t;if(t.type==="click"){var o=e.cloneNode(!0);r=Object.create(t,{target:{value:o},currentTarget:{value:o}}),o.value="",a(r);return}if(n!==void 0){r=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=n,a(r);return}a(r)}}function Ke(e,t){if(e){e.focus(t);var a=t||{},n=a.cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}function Me(e){return typeof e>"u"||e===null?"":String(e)}var Be=function(t){var a,n,r=t.inputElement,o=t.prefixCls,s=t.prefix,u=t.suffix,I=t.addonBefore,l=t.addonAfter,d=t.className,b=t.style,g=t.disabled,$=t.readOnly,p=t.focused,P=t.triggerFocus,h=t.allowClear,D=t.value,y=t.handleReset,M=t.hidden,R=t.classes,v=t.classNames,C=t.dataAttrs,z=t.styles,H=f.useRef(null),Q=function(V){var N;(N=H.current)!==null&&N!==void 0&&N.contains(V.target)&&P?.()},K=function(){var V;if(!h)return null;var N=!g&&!$&&D,x="".concat(o,"-clear-icon"),m=ge(h)==="object"&&h!==null&&h!==void 0&&h.clearIcon?h.clearIcon:"âœ–";return c.createElement("span",{onClick:y,onMouseDown:function(Z){return Z.preventDefault()},className:B(x,(V={},_(V,"".concat(x,"-hidden"),!N),_(V,"".concat(x,"-has-suffix"),!!u),V)),role:"button",tabIndex:-1},m)},S=f.cloneElement(r,{value:D,hidden:M,className:B((a=r.props)===null||a===void 0?void 0:a.className,!se(t)&&!J(t)&&d)||null,style:L(L({},(n=r.props)===null||n===void 0?void 0:n.style),!se(t)&&!J(t)?b:{})});if(se(t)){var E,A="".concat(o,"-affix-wrapper"),G=B(A,(E={},_(E,"".concat(A,"-disabled"),g),_(E,"".concat(A,"-focused"),p),_(E,"".concat(A,"-readonly"),$),_(E,"".concat(A,"-input-with-clear-btn"),u&&h&&D),E),!J(t)&&d,R?.affixWrapper),W=(u||h)&&c.createElement("span",{className:B("".concat(o,"-suffix"),v?.suffix),style:z?.suffix},K(),u);S=c.createElement("span",me({className:G,style:J(t)?void 0:b,hidden:!J(t)&&M,onClick:Q},C?.affixWrapper,{ref:H}),s&&c.createElement("span",{className:B("".concat(o,"-prefix"),v?.prefix),style:z?.prefix},s),f.cloneElement(r,{value:D,hidden:null}),W)}if(J(t)){var X="".concat(o,"-group"),j="".concat(X,"-addon"),q=B("".concat(o,"-wrapper"),X,R?.wrapper),Y=B("".concat(o,"-group-wrapper"),d,R?.group);return c.createElement("span",{className:Y,style:b,hidden:M},c.createElement("span",{className:q},I&&c.createElement("span",{className:j},I),f.cloneElement(S,{hidden:null}),l&&c.createElement("span",{className:j},l)))}return S},Pe=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,je=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],ce={},T;function ke(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&ce[a])return ce[a];var n=window.getComputedStyle(e),r=n.getPropertyValue("box-sizing")||n.getPropertyValue("-moz-box-sizing")||n.getPropertyValue("-webkit-box-sizing"),o=parseFloat(n.getPropertyValue("padding-bottom"))+parseFloat(n.getPropertyValue("padding-top")),s=parseFloat(n.getPropertyValue("border-bottom-width"))+parseFloat(n.getPropertyValue("border-top-width")),u=je.map(function(l){return"".concat(l,":").concat(n.getPropertyValue(l))}).join(";"),I={sizingStyle:u,paddingSize:o,borderSize:s,boxSizing:r};return t&&a&&(ce[a]=I),I}function _e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;T||(T=document.createElement("textarea"),T.setAttribute("tab-index","-1"),T.setAttribute("aria-hidden","true"),document.body.appendChild(T)),e.getAttribute("wrap")?T.setAttribute("wrap",e.getAttribute("wrap")):T.removeAttribute("wrap");var r=ke(e,t),o=r.paddingSize,s=r.borderSize,u=r.boxSizing,I=r.sizingStyle;T.setAttribute("style","".concat(I,";").concat(Pe)),T.value=e.value||e.placeholder||"";var l=void 0,d=void 0,b,g=T.scrollHeight;if(u==="border-box"?g+=s:u==="content-box"&&(g-=o),a!==null||n!==null){T.value=" ";var $=T.scrollHeight-o;a!==null&&(l=$*a,u==="border-box"&&(l=l+o+s),g=Math.max(l,g)),n!==null&&(d=$*n,u==="border-box"&&(d=d+o+s),b=g>d?"":"hidden",g=Math.min(d,g))}var p={height:g,overflowY:b,resize:"none"};return l&&(p.minHeight=l),d&&(p.maxHeight=d),p}var De=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],de=0,fe=1,ve=2,He=f.forwardRef(function(e,t){var a=e,n=a.prefixCls;a.onPressEnter;var r=a.defaultValue,o=a.value,s=a.autoSize,u=a.onResize,I=a.className,l=a.style,d=a.disabled,b=a.onChange;a.onInternalAutoSize;var g=pe(a,De),$=ye(r,{value:o,postState:function(m){return m??""}}),p=O($,2),P=p[0],h=p[1],D=function(m){h(m.target.value),b?.(m)},y=f.useRef();f.useImperativeHandle(t,function(){return{textArea:y.current}});var M=f.useMemo(function(){return s&&ge(s)==="object"?[s.minRows,s.maxRows]:[]},[s]),R=O(M,2),v=R[0],C=R[1],z=!!s,H=function(){try{if(document.activeElement===y.current){var m=y.current,ee=m.selectionStart,Z=m.selectionEnd,ne=m.scrollTop;y.current.setSelectionRange(ee,Z),y.current.scrollTop=ne}}catch{}},Q=f.useState(ve),K=O(Q,2),S=K[0],E=K[1],A=f.useState(),G=O(A,2),W=G[0],X=G[1],j=function(){E(de)};Se(function(){z&&j()},[o,v,C,z]),Se(function(){if(S===de)E(fe);else if(S===fe){var x=_e(y.current,!1,v,C);E(ve),X(x)}else H()},[S]);var q=f.useRef(),Y=function(){xe.cancel(q.current)},U=function(m){S===ve&&(u?.(m),s&&(Y(),q.current=xe(function(){j()})))};f.useEffect(function(){return Y},[]);var V=z?W:null,N=L(L({},l),V);return(S===de||S===fe)&&(N.overflowY="hidden",N.overflowX="hidden"),f.createElement($e,{onResize:U,disabled:!(s||u)},f.createElement("textarea",me({},g,{ref:y,style:N,className:B(n,I,_({},"".concat(n,"-disabled"),d)),disabled:d,value:P,onChange:D})))}),Le=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function Re(e,t){return ie(e||"").slice(0,t).join("")}function be(e,t,a,n){var r=a;return e?r=Re(a,n):ie(t||"").length<a.length&&ie(a||"").length>n&&(r=t),r}var Ye=c.forwardRef(function(e,t){var a,n=e.defaultValue,r=e.value,o=e.onFocus,s=e.onBlur,u=e.onChange,I=e.allowClear,l=e.maxLength,d=e.onCompositionStart,b=e.onCompositionEnd,g=e.suffix,$=e.prefixCls,p=$===void 0?"rc-textarea":$,P=e.classes,h=e.showCount,D=e.className,y=e.style,M=e.disabled,R=e.hidden,v=e.classNames,C=e.styles,z=e.onResize,H=pe(e,Le),Q=ye(n,{value:r,defaultValue:n}),K=O(Q,2),S=K[0],E=K[1],A=f.useRef(null),G=c.useState(!1),W=O(G,2),X=W[0],j=W[1],q=c.useState(!1),Y=O(q,2),U=Y[0],V=Y[1],N=c.useRef(),x=c.useRef(0),m=c.useState(null),ee=O(m,2),Z=ee[0],ne=ee[1],oe=function(){A.current.textArea.focus()};f.useImperativeHandle(t,function(){return{resizableTextArea:A.current,focus:oe,blur:function(){A.current.textArea.blur()}}}),f.useEffect(function(){j(function(F){return!M&&F})},[M]);var re=Number(l)>0,ze=function(i){V(!0),N.current=S,x.current=i.currentTarget.selectionStart,d?.(i)},Ee=function(i){V(!1);var w=i.currentTarget.value;if(re){var k,Fe=x.current>=l+1||x.current===((k=N.current)===null||k===void 0?void 0:k.length);w=be(Fe,N.current,w,l)}w!==S&&(E(w),ue(i.currentTarget,i,u,w)),b?.(i)},we=function(i){var w=i.target.value;if(!U&&re){var k=i.target.selectionStart>=l+1||i.target.selectionStart===w.length||!i.target.selectionStart;w=be(k,S,w,l)}E(w),ue(i.currentTarget,i,u,w)},Ce=function(i){var w=H.onPressEnter,k=H.onKeyDown;i.key==="Enter"&&w&&w(i),k?.(i)},Ae=function(i){j(!0),o?.(i)},Ne=function(i){j(!1),s?.(i)},Ie=function(i){E(""),oe(),ue(A.current.textArea,i,u)},te=Me(S);!U&&re&&r==null&&(te=Re(te,l));var le=g,ae;if(h){var he=ie(te).length;ge(h)==="object"?ae=h.formatter({value:te,count:he,maxLength:l}):ae="".concat(he).concat(re?" / ".concat(l):""),le=c.createElement(c.Fragment,null,le,c.createElement("span",{className:B("".concat(p,"-data-count"),v?.count),style:C?.count},ae))}var Te=function(i){z?.(i),Z===null?ne("mounted"):Z==="mounted"&&ne("resized")},Ve=c.createElement(Be,{value:te,allowClear:I,handleReset:Ie,suffix:le,prefixCls:p,classes:{affixWrapper:B(P?.affixWrapper,(a={},_(a,"".concat(p,"-show-count"),h),_(a,"".concat(p,"-textarea-allow-clear"),I),a))},disabled:M,focused:X,className:D,style:L(L({},y),Z==="resized"?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof ae=="string"?ae:void 0}},hidden:R,inputElement:c.createElement(He,me({},H,{onKeyDown:Ce,onChange:we,onFocus:Ae,onBlur:Ne,onCompositionStart:ze,onCompositionEnd:Ee,className:v?.textarea,style:L(L({},C?.textarea),{},{resize:y?.resize}),disabled:M,prefixCls:p,onResize:Te,ref:A}))});return Ve});export{Be as B,Ye as T,Me as f,ue as r,Ke as t};
