import{r as n,j as T,R as P,d as G,D,F as _,a as z,c as N,N as W,G as $,H as J,E as X,p as Y,n as q,I as K,J as V,L as Z}from"./index-7e4a4b07.js";import{u as U,r as ee}from"./index-618df176.js";import{A as B}from"./ActionButton-444465d3.js";import{u as te,D as ne}from"./index-5ac751e5.js";import{N as oe}from"./Compact-a8ad6370.js";import{B as L,c as se}from"./button-8fc5a235.js";import{u as R}from"./useLocale-67a063e1.js";function le(){const[e,o]=n.useState([]),s=n.useCallback(t=>(o(a=>[].concat(T(a),[t])),()=>{o(a=>a.filter(d=>d!==t))}),[]);return[e,s]}function ae(e,o){return P.createElement("span",{className:`${e}-close-x`},o||P.createElement(G,{className:`${e}-close-icon`}))}const re=e=>{const{okText:o,okType:s="primary",cancelText:t,confirmLoading:a,onOk:d,onCancel:C,okButtonProps:u,cancelButtonProps:c}=e,[l]=R("Modal",D());return P.createElement(P.Fragment,null,P.createElement(L,Object.assign({onClick:C},c),t||l?.cancelText),P.createElement(L,Object.assign({},se(s),{loading:a,onClick:d},u),o||l?.okText))};var ce=globalThis&&globalThis.__rest||function(e,o){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)o.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(s[t[a]]=e[t[a]]);return s};let A;const ie=e=>{A={x:e.pageX,y:e.pageY},setTimeout(()=>{A=null},100)};_()&&document.documentElement.addEventListener("click",ie,!0);const ue=e=>{var o;const{getPopupContainer:s,getPrefixCls:t,direction:a}=n.useContext(z),d=j=>{const{onCancel:E}=e;E?.(j)},C=j=>{const{onOk:E}=e;E?.(j)},{prefixCls:u,className:c,rootClassName:l,open:r,wrapClassName:p,centered:i,getContainer:f,closeIcon:g,focusTriggerAfterClose:O=!0,visible:x,width:b=520,footer:v}=e,k=ce(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width","footer"]),m=t("modal",u),y=t(),[h,F]=te(m),I=N(p,{[`${m}-centered`]:!!i,[`${m}-wrap-rtl`]:a==="rtl"}),S=v===void 0?n.createElement(re,Object.assign({},e,{onOk:C,onCancel:d})):v;return h(n.createElement(oe,null,n.createElement(W,{status:!0,override:!0},n.createElement(ne,Object.assign({width:b},k,{getContainer:f===void 0?s:f,prefixCls:m,rootClassName:N(F,l),wrapClassName:I,footer:S,visible:r??x,mousePosition:(o=k.mousePosition)!==null&&o!==void 0?o:A,onClose:d,closeIcon:ae(m,g),focusTriggerAfterClose:O,transitionName:$(y,"zoom",e.transitionName),maskTransitionName:$(y,"fade",e.maskTransitionName),className:N(F,c)})))))},fe=ue;function me(e){const{icon:o,onCancel:s,onOk:t,close:a,okText:d,okButtonProps:C,cancelText:u,cancelButtonProps:c,confirmPrefixCls:l,rootPrefixCls:r,type:p,okCancel:i,footer:f,locale:g}=e;let O=o;if(!o&&o!==null)switch(p){case"info":O=n.createElement(K,null);break;case"success":O=n.createElement(q,null);break;case"error":O=n.createElement(Y,null);break;default:O=n.createElement(X,null)}const x=e.okType||"primary",b=i??p==="confirm",v=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[k]=R("Modal"),m=g||k,y=b&&n.createElement(B,{actionFn:s,close:a,autoFocus:v==="cancel",buttonProps:c,prefixCls:`${r}-btn`},u||m?.cancelText);return n.createElement("div",{className:`${l}-body-wrapper`},n.createElement("div",{className:`${l}-body`},O,e.title===void 0?null:n.createElement("span",{className:`${l}-title`},e.title),n.createElement("div",{className:`${l}-content`},e.content)),f===void 0?n.createElement("div",{className:`${l}-btns`},y,n.createElement(B,{type:x,actionFn:t,close:a,autoFocus:v==="ok",buttonProps:C,prefixCls:`${r}-btn`},d||(b?m?.okText:m?.justOkText))):f)}const de=e=>{const{close:o,zIndex:s,afterClose:t,visible:a,open:d,keyboard:C,centered:u,getContainer:c,maskStyle:l,direction:r,prefixCls:p,wrapClassName:i,rootPrefixCls:f,iconPrefixCls:g,theme:O,bodyStyle:x,closable:b=!1,closeIcon:v,modalRender:k,focusTriggerAfterClose:m}=e,y=`${p}-confirm`,h=e.width||416,F=e.style||{},I=e.mask===void 0?!0:e.mask,S=e.maskClosable===void 0?!1:e.maskClosable,j=N(y,`${y}-${e.type}`,{[`${y}-rtl`]:r==="rtl"},e.className);return n.createElement(J,{prefixCls:f,iconPrefixCls:g,direction:r,theme:O},n.createElement(fe,{prefixCls:p,className:j,wrapClassName:N({[`${y}-centered`]:!!e.centered},i),onCancel:()=>o?.({triggerCancel:!0}),open:d,title:"",footer:null,transitionName:$(f,"zoom",e.transitionName),maskTransitionName:$(f,"fade",e.maskTransitionName),mask:I,maskClosable:S,maskStyle:l,style:F,bodyStyle:x,width:h,zIndex:s,afterClose:t,keyboard:C,centered:u,getContainer:c,closable:b,closeIcon:v,modalRender:k,focusTriggerAfterClose:m},n.createElement(me,Object.assign({},e,{confirmPrefixCls:y}))))},H=de,Ce=[],w=Ce;var ge=globalThis&&globalThis.__rest||function(e,o){var s={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&o.indexOf(t)<0&&(s[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)o.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(s[t[a]]=e[t[a]]);return s};let Q="";function xe(){return Q}function Ie(e){const o=document.createDocumentFragment();let s=Object.assign(Object.assign({},e),{close:C,open:!0}),t;function a(){for(var c=arguments.length,l=new Array(c),r=0;r<c;r++)l[r]=arguments[r];const p=l.some(i=>i&&i.triggerCancel);e.onCancel&&p&&e.onCancel.apply(e,[()=>{}].concat(T(l.slice(1))));for(let i=0;i<w.length;i++)if(w[i]===C){w.splice(i,1);break}U(o)}function d(c){var{okText:l,cancelText:r,prefixCls:p,getContainer:i}=c,f=ge(c,["okText","cancelText","prefixCls","getContainer"]);clearTimeout(t),t=setTimeout(()=>{const g=D(),{getPrefixCls:O,getIconPrefixCls:x,getTheme:b}=V(),v=O(void 0,xe()),k=p||`${v}-modal`,m=x(),y=b();let h=i;h===!1&&(h=void 0),ee(n.createElement(H,Object.assign({},f,{getContainer:h,prefixCls:k,rootPrefixCls:v,iconPrefixCls:m,okText:l,locale:g,theme:y,cancelText:r||g.cancelText})),o)})}function C(){for(var c=arguments.length,l=new Array(c),r=0;r<c;r++)l[r]=arguments[r];s=Object.assign(Object.assign({},s),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),a.apply(this,l)}}),s.visible&&delete s.visible,d(s)}function u(c){typeof c=="function"?s=c(s):s=Object.assign(Object.assign({},s),c),d(s)}return d(s),w.push(C),{destroy:C,update:u}}function be(e){return Object.assign(Object.assign({},e),{type:"warning"})}function ve(e){return Object.assign(Object.assign({},e),{type:"info"})}function pe(e){return Object.assign(Object.assign({},e),{type:"success"})}function ye(e){return Object.assign(Object.assign({},e),{type:"error"})}function Oe(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function Se(e){let{rootPrefixCls:o}=e;Q=o}const ke=(e,o)=>{let{afterClose:s,config:t}=e;var a;const[d,C]=n.useState(!0),[u,c]=n.useState(t),{direction:l,getPrefixCls:r}=n.useContext(z),p=r("modal"),i=r(),f=()=>{var b;s(),(b=u.afterClose)===null||b===void 0||b.call(u)},g=function(){C(!1);for(var b=arguments.length,v=new Array(b),k=0;k<b;k++)v[k]=arguments[k];const m=v.some(y=>y&&y.triggerCancel);u.onCancel&&m&&u.onCancel.apply(u,[()=>{}].concat(T(v.slice(1))))};n.useImperativeHandle(o,()=>({destroy:g,update:b=>{c(v=>Object.assign(Object.assign({},v),b))}}));const O=(a=u.okCancel)!==null&&a!==void 0?a:u.type==="confirm",[x]=R("Modal",Z.Modal);return n.createElement(H,Object.assign({prefixCls:p,rootPrefixCls:i},u,{close:g,open:d,afterClose:f,okText:u.okText||(O?x?.okText:x?.justOkText),direction:u.direction||l,cancelText:u.cancelText||x?.cancelText}))},he=n.forwardRef(ke);let M=0;const Ee=n.memo(n.forwardRef((e,o)=>{const[s,t]=le();return n.useImperativeHandle(o,()=>({patchElement:t}),[]),n.createElement(n.Fragment,null,s)}));function Ae(){const e=n.useRef(null),[o,s]=n.useState([]);n.useEffect(()=>{o.length&&(T(o).forEach(C=>{C()}),s([]))},[o]);const t=n.useCallback(d=>function(u){var c;M+=1;const l=n.createRef();let r;const p=n.createElement(he,{key:`modal-${M}`,config:d(u),ref:l,afterClose:()=>{r?.()}});return r=(c=e.current)===null||c===void 0?void 0:c.patchElement(p),r&&w.push(r),{destroy:()=>{function i(){var f;(f=l.current)===null||f===void 0||f.destroy()}l.current?i():s(f=>[].concat(T(f),[i]))},update:i=>{function f(){var g;(g=l.current)===null||g===void 0||g.update(i)}l.current?f():s(g=>[].concat(T(g),[f]))}}},[]);return[n.useMemo(()=>({info:t(ve),success:t(pe),error:t(ye),warning:t(be),confirm:t(Oe)}),[]),n.createElement(Ee,{key:"modal-holder",ref:e})]}export{me as C,re as F,fe as O,pe as a,ye as b,Ie as c,Oe as d,w as e,be as f,Se as m,ae as r,Ae as u,ve as w};
