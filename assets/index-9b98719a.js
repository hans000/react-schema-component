import{_ as le,e as ue,f as fe,h as de,R as b,l as pe,r as S,T as ve,U as me,al as ge,au as re,c as he,j as be}from"./index-7e4a4b07.js";var Re=function(a){le(r,a);var o=ue(r);function r(){return fe(this,r),o.apply(this,arguments)}return de(r,[{key:"render",value:function(){return this.props.children}}]),r}(b.Component),we={subtree:!0,childList:!0,attributeFilter:["style","class"]},ye=function(o){var r=o.children,l=o.options,R=l===void 0?we:l,w=o.onMutate,k=w===void 0?function(){}:w,M=pe(k),i=S.useRef(null),N=b.useRef(null),W=b.isValidElement(r)&&ve(r),g=W?r?.ref:null,T=b.useMemo(function(){return me(g,N)},[g,N]);return S.useEffect(function(){if(ge()){var x,d=re(g?.current)||re(i?.current);return d&&"MutationObserver"in window&&(x=new MutationObserver(M),x.observe(d,R)),function(){var O,E;(O=x)===null||O===void 0||O.takeRecords(),(E=x)===null||E===void 0||E.disconnect()}}},[R,g]),r?b.createElement(Re,{ref:i},W?b.cloneElement(r,{ref:T}):r):null};function $e(a){return a.replace(/([A-Z])/g,"-$1").toLowerCase()}function ke(a){return Object.keys(a).map(o=>`${$e(o)}: ${a[o]};`).join(" ")}function ne(){return window.devicePixelRatio||1}function Y(a,o,r,l){a.translate(o,r),a.rotate(Math.PI/180*Number(l)),a.translate(-o,-r)}const Me=(a,o)=>{let r=!1;return a.removedNodes.length&&(r=Array.from(a.removedNodes).some(l=>l===o)),a.type==="attributes"&&a.target===o&&(r=!0),r},F=2,ae=3,Ee=a=>{var o,r;const{zIndex:l=9,rotate:R=-22,width:w,height:k,image:M,content:i,font:N={},style:W,className:g,rootClassName:T,gap:x=[100,100],offset:d,children:O}=a,{color:E="rgba(0,0,0,.15)",fontSize:C=16,fontWeight:U="normal",fontStyle:H="normal",fontFamily:D="sans-serif"}=N,[_,A]=x,B=_/2,G=A/2,V=(o=d?.[0])!==null&&o!==void 0?o:B,Z=(r=d?.[1])!==null&&r!==void 0?r:G,oe=()=>{const e={zIndex:l,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let t=V-B,n=Z-G;return t>0&&(e.left=`${t}px`,e.width=`calc(100% - ${t}px)`,t=0),n>0&&(e.top=`${n}px`,e.height=`calc(100% - ${n}px)`,n=0),e.backgroundPosition=`${t}px ${n}px`,e},L=S.useRef(null),p=S.useRef(),j=S.useRef(!1),se=()=>{p.current&&(p.current.remove(),p.current=void 0)},q=(e,t)=>{var n;L.current&&p.current&&(j.current=!0,p.current.setAttribute("style",ke(Object.assign(Object.assign({},oe()),{backgroundImage:`url('${e}')`,backgroundSize:`${(_+t)*F}px`}))),(n=L.current)===null||n===void 0||n.append(p.current),setTimeout(()=>{j.current=!1}))},ie=e=>{let t=120,n=64;if(!M&&e.measureText){e.font=`${Number(C)}px ${D}`;const s=Array.isArray(i)?i:[i],v=s.map(c=>e.measureText(c).width);t=Math.ceil(Math.max.apply(Math,be(v))),n=Number(C)*s.length+(s.length-1)*ae}return[w??t,k??n]},J=(e,t,n,s,v)=>{const c=ne(),h=Number(C)*c;e.font=`${H} normal ${U} ${h}px/${v}px ${D}`,e.fillStyle=E,e.textAlign="center",e.textBaseline="top",e.translate(s/2,0);const u=Array.isArray(i)?i:[i];u?.forEach((f,m)=>{e.fillText(f??"",t,n+m*(h+ae*c))})},K=(e,t,n,s,v,c,h,u,f,m,y)=>{J(t,n,s,v,c),t.restore(),Y(t,h,u,R),J(t,f,m,v,c),q(e.toDataURL(),y)},Q=()=>{const e=document.createElement("canvas"),t=e.getContext("2d");if(t){p.current||(p.current=document.createElement("div"));const n=ne(),[s,v]=ie(t),c=(_+s)*n,h=(A+v)*n;e.setAttribute("width",`${c*F}px`),e.setAttribute("height",`${h*F}px`);const u=_*n/2,f=A*n/2,m=s*n,y=v*n,ee=(m+_*n)/2,te=(y+A*n)/2,z=u+c,I=f+h,P=ee+c,X=te+h;if(t.save(),Y(t,ee,te,R),M){const $=new Image;$.onload=()=>{t.drawImage($,u,f,m,y),t.restore(),Y(t,P,X,R),t.drawImage($,z,I,m,y),q(e.toDataURL(),s)},$.onerror=()=>K(e,t,u,f,m,y,P,X,z,I,s),$.crossOrigin="anonymous",$.referrerPolicy="no-referrer",$.src=M}else K(e,t,u,f,m,y,P,X,z,I,s)}},ce=e=>{j.current||e.forEach(t=>{Me(t,p.current)&&(se(),Q())})};return S.useEffect(Q,[R,l,w,k,M,i,E,C,U,H,D,_,A,V,Z]),b.createElement(ye,{onMutate:ce},b.createElement("div",{ref:L,className:he(g,T),style:Object.assign({position:"relative"},W)},O))};export{Ee as default};
