import{r as t,g as Q,m as Y,k as Z,U as ee,a as A,av as te,c as P,i as re,a8 as ne,V as oe}from"./index-7e4a4b07.js";import{u as se}from"./useBreakpoint-2a5fa87b.js";import ae from"./index-1b46fb31.js";import"./useForceUpdate-26674e36.js";import"./PurePanel-bfdc9985.js";import"./placements-d495e90e.js";import"./roundedArrow-cf08b32b.js";import"./zoom-470fe614.js";import"./presetColors-88dfd00f.js";import"./index-5b57a4c3.js";import"./Compact-a8ad6370.js";import"./index-5d226ec8.js";import"./colors-7be04c46.js";const k=t.createContext("default"),I=e=>{let{children:n,size:o}=e;const r=t.useContext(k);return t.createElement(k.Provider,{value:o||r},n)},ie=e=>{const{antCls:n,componentCls:o,iconCls:r,avatarBg:s,avatarColor:x,containerSize:m,containerSizeLG:h,containerSizeSM:f,textFontSize:u,textFontSizeLG:g,textFontSizeSM:C,borderRadius:E,borderRadiusLG:y,borderRadiusSM:j,lineWidth:z,lineType:$}=e,p=(c,v,d)=>({width:c,height:c,lineHeight:`${c-z*2}px`,borderRadius:"50%",[`&${o}-square`]:{borderRadius:d},[`${o}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${o}-icon`]:{fontSize:v,[`> ${r}`]:{margin:0}}});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},Z(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:x,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${z}px ${$} transparent`,["&-image"]:{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),p(m,u,E)),{["&-lg"]:Object.assign({},p(h,g,y)),["&-sm"]:Object.assign({},p(f,C,j)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},ce=e=>{const{componentCls:n,groupBorderColor:o,groupOverlapping:r,groupSpace:s}=e;return{[`${n}-group`]:{display:"inline-flex",[`${n}`]:{borderColor:o},["> *:not(:first-child)"]:{marginInlineStart:r}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:s}}}},H=Q("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:o}=e,r=Y(e,{avatarBg:o,avatarColor:n});return[ie(r),ce(r)]},e=>{const{controlHeight:n,controlHeightLG:o,controlHeightSM:r,fontSize:s,fontSizeLG:x,fontSizeXL:m,fontSizeHeading3:h,marginXS:f,marginXXS:u,colorBorderBg:g}=e;return{containerSize:n,containerSizeLG:o,containerSizeSM:r,textFontSize:Math.round((x+m)/2),textFontSizeLG:h,textFontSizeSM:s,groupSpace:u,groupOverlapping:-f,groupBorderColor:g}});var le=globalThis&&globalThis.__rest||function(e,n){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)n.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(o[r[s]]=e[r[s]]);return o};const ge=(e,n)=>{const o=t.useContext(k),[r,s]=t.useState(1),[x,m]=t.useState(!1),[h,f]=t.useState(!0),u=t.useRef(null),g=t.useRef(null),C=ee(n,u),{getPrefixCls:E}=t.useContext(A),y=()=>{if(!g.current||!u.current)return;const a=g.current.offsetWidth,l=u.current.offsetWidth;if(a!==0&&l!==0){const{gap:b=4}=e;b*2<l&&s(l-b*2<a?(l-b*2)/a:1)}};t.useEffect(()=>{m(!0)},[]),t.useEffect(()=>{f(!0),s(1)},[e.src]),t.useEffect(y,[e.gap]);const j=()=>{const{onError:a}=e;a?.()!==!1&&f(!1)},{prefixCls:z,shape:$="circle",size:p="default",src:c,srcSet:v,icon:d,className:T,rootClassName:B,alt:F,draggable:W,children:N,crossOrigin:_}=e,R=le(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),i=p==="default"?o:p,X=Object.keys(typeof i=="object"?i||{}:{}).some(a=>["xs","sm","md","lg","xl","xxl"].includes(a)),w=se(X),V=t.useMemo(()=>{if(typeof i!="object")return{};const a=te.find(b=>w[b]),l=i[a];return l?{width:l,height:l,lineHeight:`${l}px`,fontSize:d?l/2:18}:{}},[w,i]),S=E("avatar",z),[q,U]=H(S),D=P({[`${S}-lg`]:i==="large",[`${S}-sm`]:i==="small"}),G=t.isValidElement(c),J=P(S,D,{[`${S}-${$}`]:!!$,[`${S}-image`]:G||c&&h,[`${S}-icon`]:!!d},T,B,U),K=typeof i=="number"?{width:i,height:i,lineHeight:`${i}px`,fontSize:d?i/2:18}:{};let O;if(typeof c=="string"&&h)O=t.createElement("img",{src:c,draggable:W,srcSet:v,onError:j,alt:F,crossOrigin:_});else if(G)O=c;else if(d)O=d;else if(x||r!==1){const a=`scale(${r}) translateX(-50%)`,l={msTransform:a,WebkitTransform:a,transform:a},b=typeof i=="number"?{lineHeight:`${i}px`}:{};O=t.createElement(re,{onResize:y},t.createElement("span",{className:`${S}-string`,ref:g,style:Object.assign(Object.assign({},b),l)},N))}else O=t.createElement("span",{className:`${S}-string`,style:{opacity:0},ref:g},N);return delete R.onError,delete R.gap,q(t.createElement("span",Object.assign({},R,{style:Object.assign(Object.assign(Object.assign({},K),V),R.style),className:J,ref:C}),O))},me=t.forwardRef(ge),L=me,pe=e=>{const{getPrefixCls:n,direction:o}=t.useContext(A),{prefixCls:r,className:s,rootClassName:x,maxCount:m,maxStyle:h,size:f}=e,u=n("avatar",r),g=`${u}-group`,[C,E]=H(u),y=P(g,{[`${g}-rtl`]:o==="rtl"},s,x,E),{children:j,maxPopoverPlacement:z="top",maxPopoverTrigger:$="hover"}=e,p=ne(j).map((v,d)=>oe(v,{key:`avatar-key-${d}`})),c=p.length;if(m&&m<c){const v=p.slice(0,m),d=p.slice(m,c);return v.push(t.createElement(ae,{key:"avatar-popover-key",content:d,trigger:$,placement:z,overlayClassName:`${g}-popover`},t.createElement(L,{style:h},`+${c-m}`))),C(t.createElement(I,{size:f},t.createElement("div",{className:y,style:e.style},v)))}return C(t.createElement(I,{size:f},t.createElement("div",{className:y,style:e.style},p)))},de=pe,M=L;M.Group=de;const je=M;export{de as Group,je as default};
