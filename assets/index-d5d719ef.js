import{r as f,V as v}from"./index-7e4a4b07.js";import{u as T}from"./useForceUpdate-26674e36.js";import{S as p}from"./Statistic-d281752d.js";const x=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function D(o,c){let s=o;const e=/\[[^\]]*]/g,a=(c.match(e)||[]).map(r=>r.slice(1,-1)),u=c.replace(e,"[]"),n=x.reduce((r,d)=>{let[l,t]=d;if(r.includes(l)){const m=Math.floor(s/t);return s-=m*t,r.replace(new RegExp(`${l}+`,"g"),g=>{const w=g.length;return m.toString().padStart(w,"0")})}return r},u);let i=0;return n.replace(e,()=>{const r=a[i];return i+=1,r})}function E(o,c){const{format:s=""}=c,e=new Date(o).getTime(),a=Date.now(),u=Math.max(e-a,0);return D(u,s)}const R=1e3/30;function h(o){return new Date(o).getTime()}const S=o=>{const{value:c,format:s="HH:mm:ss",onChange:e,onFinish:a}=o,u=T(),n=f.useRef(null),i=()=>{a?.(),n.current&&(clearInterval(n.current),n.current=null)},r=()=>{const t=h(c);t>=Date.now()&&(n.current=setInterval(()=>{u(),e?.(t-Date.now()),t<Date.now()&&i()},R))};f.useEffect(()=>(r(),()=>{n.current&&(clearInterval(n.current),n.current=null)}),[c]);const d=(t,m)=>E(t,Object.assign(Object.assign({},m),{format:s})),l=t=>v(t,{title:void 0});return f.createElement(p,Object.assign({},o,{valueRender:l,formatter:d}))},C=f.memo(S);p.Countdown=C;export{p as default};
