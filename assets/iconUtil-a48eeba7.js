import{r as f,M as ce,s as O,B as Be,q as Q,b as Qe,c as le,ak as Ze,_ as et,e as tt,f as nt,aW as De,j as we,y as I,ag as de,x as J,h as at,v as se,a4 as ot,S as rt,g as it,K as dt,m as st,k as lt,aO as $e,aa as Te,V as Pe}from"./index-7e4a4b07.js";import{T as qe,g as te,C as xe,h as ze,i as Oe,b as H,j as ct,k as R,l as Le,d as q,p as ut,a as Ke,m as Ee,f as ft,c as vt,e as Me,n as Ie,o as be}from"./treeUtil-8a6683e7.js";import{L as gt}from"./List-6fe3f4d7.js";import{g as pt}from"./index-b79aaa5f.js";import{g as yt}from"./collapse-97de76d4.js";import{L as ht}from"./LoadingOutlined-abbc5ffc.js";var mt={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};const Kt=mt;var Et=function(o,i){return f.createElement(ce,O({},o,{ref:i,icon:Kt}))};const bt=f.forwardRef(Et);var xt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const Nt=xt;var St=function(o,i){return f.createElement(ce,O({},o,{ref:i,icon:Nt}))};const Ct=f.forwardRef(St);var kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};const Dt=kt;var wt=function(o,i){return f.createElement(ce,O({},o,{ref:i,icon:Dt}))};const $t=f.forwardRef(wt);var Tt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};const Pt=Tt;var Ot=function(o,i){return f.createElement(ce,O({},o,{ref:i,icon:Pt}))};const Lt=f.forwardRef(Ot);function Ue(r){if(r==null)throw new TypeError("Cannot destructure "+r)}var Mt=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],je=function(o,i){var e=o.className,d=o.style,u=o.motion,K=o.motionNodes,t=o.motionType,a=o.onMotionStart,n=o.onMotionEnd,l=o.active,c=o.treeNodeRequiredProps,v=Be(o,Mt),g=f.useState(!0),y=Q(g,2),h=y[0],m=y[1],s=f.useContext(qe),E=s.prefixCls,b=f.useRef(!1),p=function(){b.current||n(),b.current=!0};f.useEffect(function(){K&&t==="hide"&&h&&m(!1)},[K]);var x=null;return f.useEffect(function(){return K&&(x===null?a():clearTimeout(x)),function(){K&&(x=setTimeout(p,0))}},[]),K?f.createElement(Qe,O({ref:i,visible:h},u,{motionAppear:t==="show",onAppearEnd:p,onLeaveEnd:p}),function(N,S){var k=N.className,D=N.style;return f.createElement("div",{ref:S,className:le("".concat(E,"-treenode-motion"),k),style:D},K.map(function(w){var $=O({},(Ue(w.data),w.data)),T=w.title,P=w.key,L=w.isStart,A=w.isEnd;delete $.children;var _=te(P,c);return f.createElement(xe,O({},$,_,{title:T,active:l,data:w.data,key:P,isStart:L,isEnd:A}))}))}):f.createElement(xe,O({domRef:i,className:e,style:d},v,{active:l}))};je.displayName="MotionTreeNode";var It=f.forwardRef(je);function Rt(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=r.length,e=o.length;if(Math.abs(i-e)!==1)return{add:!1,key:null};function d(u,K){var t=new Map;u.forEach(function(n){t.set(n,!0)});var a=K.filter(function(n){return!t.has(n)});return a.length===1?a[0]:null}return i<e?{add:!0,key:d(r,o)}:{add:!1,key:d(o,r)}}function Re(r,o,i){var e=r.findIndex(function(t){return t.key===i}),d=r[e+1],u=o.findIndex(function(t){return t.key===i});if(d){var K=o.findIndex(function(t){return t.key===d.key});return o.slice(u+1,K)}return o.slice(u+1)}var At=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],Ae={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Ht=function(){},V="RC_TREE_MOTION_".concat(Math.random()),Ne={key:V},We={key:V,level:0,index:0,pos:"0",node:Ne,nodes:[Ne]},He={parent:null,children:[],pos:We.pos,data:Ne,title:null,key:V,isStart:[],isEnd:[]};function _e(r,o,i,e){return o===!1||!i?r:r.slice(0,Math.ceil(i/e)+1)}function Fe(r){var o=r.key,i=r.pos;return ze(o,i)}function _t(r){for(var o=String(r.data.key),i=r;i.parent;)i=i.parent,o="".concat(i.data.key," > ").concat(o);return o}var Ve=f.forwardRef(function(r,o){var i=r.prefixCls,e=r.data;r.selectable,r.checkable;var d=r.expandedKeys,u=r.selectedKeys,K=r.checkedKeys,t=r.loadedKeys,a=r.loadingKeys,n=r.halfCheckedKeys,l=r.keyEntities,c=r.disabled,v=r.dragging,g=r.dragOverNodeKey,y=r.dropPosition,h=r.motion,m=r.height,s=r.itemHeight,E=r.virtual,b=r.focusable,p=r.activeItem,x=r.focused,N=r.tabIndex,S=r.onKeyDown,k=r.onFocus,D=r.onBlur,w=r.onActiveChange,$=r.onListChangeStart,T=r.onListChangeEnd,P=Be(r,At),L=f.useRef(null),A=f.useRef(null);f.useImperativeHandle(o,function(){return{scrollTo:function(B){L.current.scrollTo(B)},getIndentWidth:function(){return A.current.offsetWidth}}});var _=f.useState(d),M=Q(_,2),X=M[0],ue=M[1],fe=f.useState(e),ne=Q(fe,2),z=ne[0],ae=ne[1],ve=f.useState(e),oe=Q(ve,2),ge=oe[0],Y=oe[1],pe=f.useState([]),re=Q(pe,2),ye=re[0],F=re[1],Ye=f.useState(null),Se=Q(Ye,2),Ge=Se[0],he=Se[1],Ce=f.useRef(e);Ce.current=e;function me(){var C=Ce.current;ae(C),Y(C),F([]),he(null),T()}Ze(function(){ue(d);var C=Rt(X,d);if(C.key!==null)if(C.add){var B=z.findIndex(function(Z){var ee=Z.key;return ee===C.key}),U=_e(Re(z,e,C.key),E,m,s),G=z.slice();G.splice(B+1,0,He),Y(G),F(U),he("show")}else{var j=e.findIndex(function(Z){var ee=Z.key;return ee===C.key}),W=_e(Re(e,z,C.key),E,m,s),ie=e.slice();ie.splice(j+1,0,He),Y(ie),F(W),he("hide")}else z!==e&&(ae(e),Y(e))},[d,e]),f.useEffect(function(){v||me()},[v]);var Je=h?ge:e,ke={expandedKeys:d,selectedKeys:u,loadedKeys:t,loadingKeys:a,checkedKeys:K,halfCheckedKeys:n,dragOverNodeKey:g,dropPosition:y,keyEntities:l};return f.createElement(f.Fragment,null,x&&p&&f.createElement("span",{style:Ae,"aria-live":"assertive"},_t(p)),f.createElement("div",null,f.createElement("input",{style:Ae,disabled:b===!1||c,tabIndex:b!==!1?N:null,onKeyDown:S,onFocus:k,onBlur:D,value:"",onChange:Ht,"aria-label":"for screen reader"})),f.createElement("div",{className:"".concat(i,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},f.createElement("div",{className:"".concat(i,"-indent")},f.createElement("div",{ref:A,className:"".concat(i,"-indent-unit")}))),f.createElement(gt,O({},P,{data:Je,itemKey:Fe,height:m,fullHeight:!1,virtual:E,itemHeight:s,prefixCls:"".concat(i,"-list"),ref:L,onVisibleChange:function(B,U){var G=new Set(B),j=U.filter(function(W){return!G.has(W)});j.some(function(W){return Fe(W)===V})&&me()}}),function(C){var B=C.pos,U=O({},(Ue(C.data),C.data)),G=C.title,j=C.key,W=C.isStart,ie=C.isEnd,Z=ze(j,B);delete U.key,delete U.children;var ee=te(Z,ke);return f.createElement(It,O({},U,ee,{title:G,active:!!p&&j===p.key,pos:B,data:C.data,isStart:W,isEnd:ie,motion:h,motionNodes:j===V?ye:null,motionType:Ge,onMotionStart:$,onMotionEnd:me,treeNodeRequiredProps:ke,onMouseMove:function(){w(null)}}))}))});Ve.displayName="NodeList";function Ft(r){var o=r.dropPosition,i=r.dropLevelOffset,e=r.indent,d={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(o){case-1:d.top=0,d.left=-i*e;break;case 1:d.bottom=0,d.left=-i*e;break;case 0:d.bottom=0,d.left=e;break}return f.createElement("div",{style:d})}var Bt=10,Xe=function(r){et(i,r);var o=tt(i);function i(){var e;nt(this,i);for(var d=arguments.length,u=new Array(d),K=0;K<d;K++)u[K]=arguments[K];return e=o.call.apply(o,[this].concat(u)),e.destroyed=!1,e.delayedDragEnterLogic=void 0,e.loadingRetryTimes={},e.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Oe()},e.dragStartMousePosition=null,e.dragNode=void 0,e.currentMouseOverDroppableNodeKey=null,e.listRef=f.createRef(),e.onNodeDragStart=function(t,a){var n=e.state,l=n.expandedKeys,c=n.keyEntities,v=e.props.onDragStart,g=a.props.eventKey;e.dragNode=a,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var y=H(l,g);e.setState({draggingNodeKey:g,dragChildrenKeys:ct(g,c),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(y),window.addEventListener("dragend",e.onWindowDragEnd),v?.({event:t,node:R(a.props)})},e.onNodeDragEnter=function(t,a){var n=e.state,l=n.expandedKeys,c=n.keyEntities,v=n.dragChildrenKeys,g=n.flattenNodes,y=n.indent,h=e.props,m=h.onDragEnter,s=h.onExpand,E=h.allowDrop,b=h.direction,p=a.props,x=p.pos,N=p.eventKey,S=De(e),k=S.dragNode;if(e.currentMouseOverDroppableNodeKey!==N&&(e.currentMouseOverDroppableNodeKey=N),!k){e.resetDragState();return}var D=Le(t,k,a,y,e.dragStartMousePosition,E,g,c,l,b),w=D.dropPosition,$=D.dropLevelOffset,T=D.dropTargetKey,P=D.dropContainerKey,L=D.dropTargetPos,A=D.dropAllowed,_=D.dragOverNodeKey;if(v.indexOf(T)!==-1||!A){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(M){clearTimeout(e.delayedDragEnterLogic[M])}),k.props.eventKey!==a.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[x]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var M=we(l),X=c[a.props.eventKey];X&&(X.children||[]).length&&(M=q(l,a.props.eventKey)),"expandedKeys"in e.props||e.setExpandedKeys(M),s?.(M,{node:R(a.props),expanded:!0,nativeEvent:t.nativeEvent})}},800)),k.props.eventKey===T&&$===0){e.resetDragState();return}e.setState({dragOverNodeKey:_,dropPosition:w,dropLevelOffset:$,dropTargetKey:T,dropContainerKey:P,dropTargetPos:L,dropAllowed:A}),m?.({event:t,node:R(a.props),expandedKeys:l})},e.onNodeDragOver=function(t,a){var n=e.state,l=n.dragChildrenKeys,c=n.flattenNodes,v=n.keyEntities,g=n.expandedKeys,y=n.indent,h=e.props,m=h.onDragOver,s=h.allowDrop,E=h.direction,b=De(e),p=b.dragNode;if(p){var x=Le(t,p,a,y,e.dragStartMousePosition,s,c,v,g,E),N=x.dropPosition,S=x.dropLevelOffset,k=x.dropTargetKey,D=x.dropContainerKey,w=x.dropAllowed,$=x.dropTargetPos,T=x.dragOverNodeKey;l.indexOf(k)!==-1||!w||(p.props.eventKey===k&&S===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():N===e.state.dropPosition&&S===e.state.dropLevelOffset&&k===e.state.dropTargetKey&&D===e.state.dropContainerKey&&$===e.state.dropTargetPos&&w===e.state.dropAllowed&&T===e.state.dragOverNodeKey||e.setState({dropPosition:N,dropLevelOffset:S,dropTargetKey:k,dropContainerKey:D,dropTargetPos:$,dropAllowed:w,dragOverNodeKey:T}),m?.({event:t,node:R(a.props)}))}},e.onNodeDragLeave=function(t,a){e.currentMouseOverDroppableNodeKey===a.props.eventKey&&!t.currentTarget.contains(t.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var n=e.props.onDragLeave;n?.({event:t,node:R(a.props)})},e.onWindowDragEnd=function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDragEnd=function(t,a){var n=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),n?.({event:t,node:R(a.props)}),e.dragNode=null,window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDrop=function(t,a){var n,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=e.state,v=c.dragChildrenKeys,g=c.dropPosition,y=c.dropTargetKey,h=c.dropTargetPos,m=c.dropAllowed;if(m){var s=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),y!==null){var E=I(I({},te(y,e.getTreeNodeRequiredProps())),{},{active:((n=e.getActiveItem())===null||n===void 0?void 0:n.key)===y,data:e.state.keyEntities[y].node}),b=v.indexOf(y)!==-1;de(!b,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var p=ut(h),x={event:t,node:R(E),dragNode:e.dragNode?R(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(v),dropToGap:g!==0,dropPosition:g+Number(p[p.length-1])};l||s?.(x),e.dragNode=null}}},e.cleanDragState=function(){var t=e.state.draggingNodeKey;t!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null},e.triggerExpandActionExpand=function(t,a){var n=e.state,l=n.expandedKeys,c=n.flattenNodes,v=a.expanded,g=a.key,y=a.isLeaf;if(!(y||t.shiftKey||t.metaKey||t.ctrlKey)){var h=c.filter(function(s){return s.key===g})[0],m=R(I(I({},te(g,e.getTreeNodeRequiredProps())),{},{data:h.data}));e.setExpandedKeys(v?H(l,g):q(l,g)),e.onNodeExpand(t,m)}},e.onNodeClick=function(t,a){var n=e.props,l=n.onClick,c=n.expandAction;c==="click"&&e.triggerExpandActionExpand(t,a),l?.(t,a)},e.onNodeDoubleClick=function(t,a){var n=e.props,l=n.onDoubleClick,c=n.expandAction;c==="doubleClick"&&e.triggerExpandActionExpand(t,a),l?.(t,a)},e.onNodeSelect=function(t,a){var n=e.state.selectedKeys,l=e.state,c=l.keyEntities,v=l.fieldNames,g=e.props,y=g.onSelect,h=g.multiple,m=a.selected,s=a[v.key],E=!m;E?h?n=q(n,s):n=[s]:n=H(n,s);var b=n.map(function(p){var x=c[p];return x?x.node:null}).filter(function(p){return p});e.setUncontrolledState({selectedKeys:n}),y?.(n,{event:"select",selected:E,node:a,selectedNodes:b,nativeEvent:t.nativeEvent})},e.onNodeCheck=function(t,a,n){var l=e.state,c=l.keyEntities,v=l.checkedKeys,g=l.halfCheckedKeys,y=e.props,h=y.checkStrictly,m=y.onCheck,s=a.key,E,b={event:"check",node:a,checked:n,nativeEvent:t.nativeEvent};if(h){var p=n?q(v,s):H(v,s),x=H(g,s);E={checked:p,halfChecked:x},b.checkedNodes=p.map(function($){return c[$]}).filter(function($){return $}).map(function($){return $.node}),e.setUncontrolledState({checkedKeys:p})}else{var N=Ke([].concat(we(v),[s]),!0,c),S=N.checkedKeys,k=N.halfCheckedKeys;if(!n){var D=new Set(S);D.delete(s);var w=Ke(Array.from(D),{checked:!1,halfCheckedKeys:k},c);S=w.checkedKeys,k=w.halfCheckedKeys}E=S,b.checkedNodes=[],b.checkedNodesPositions=[],b.halfCheckedKeys=k,S.forEach(function($){var T=c[$];if(T){var P=T.node,L=T.pos;b.checkedNodes.push(P),b.checkedNodesPositions.push({node:P,pos:L})}}),e.setUncontrolledState({checkedKeys:S},!1,{halfCheckedKeys:k})}m?.(E,b)},e.onNodeLoad=function(t){var a=t.key,n=new Promise(function(l,c){e.setState(function(v){var g=v.loadedKeys,y=g===void 0?[]:g,h=v.loadingKeys,m=h===void 0?[]:h,s=e.props,E=s.loadData,b=s.onLoad;if(!E||y.indexOf(a)!==-1||m.indexOf(a)!==-1)return null;var p=E(t);return p.then(function(){var x=e.state.loadedKeys,N=q(x,a);b?.(N,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:N}),e.setState(function(S){return{loadingKeys:H(S.loadingKeys,a)}}),l()}).catch(function(x){if(e.setState(function(S){return{loadingKeys:H(S.loadingKeys,a)}}),e.loadingRetryTimes[a]=(e.loadingRetryTimes[a]||0)+1,e.loadingRetryTimes[a]>=Bt){var N=e.state.loadedKeys;de(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:q(N,a)}),l()}c(x)}),{loadingKeys:q(m,a)}})});return n.catch(function(){}),n},e.onNodeMouseEnter=function(t,a){var n=e.props.onMouseEnter;n?.({event:t,node:a})},e.onNodeMouseLeave=function(t,a){var n=e.props.onMouseLeave;n?.({event:t,node:a})},e.onNodeContextMenu=function(t,a){var n=e.props.onRightClick;n&&(t.preventDefault(),n({event:t,node:a}))},e.onFocus=function(){var t=e.props.onFocus;e.setState({focused:!0});for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];t?.apply(void 0,n)},e.onBlur=function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];t?.apply(void 0,n)},e.getTreeNodeRequiredProps=function(){var t=e.state,a=t.expandedKeys,n=t.selectedKeys,l=t.loadedKeys,c=t.loadingKeys,v=t.checkedKeys,g=t.halfCheckedKeys,y=t.dragOverNodeKey,h=t.dropPosition,m=t.keyEntities;return{expandedKeys:a||[],selectedKeys:n||[],loadedKeys:l||[],loadingKeys:c||[],checkedKeys:v||[],halfCheckedKeys:g||[],dragOverNodeKey:y,dropPosition:h,keyEntities:m}},e.setExpandedKeys=function(t){var a=e.state,n=a.treeData,l=a.fieldNames,c=Ee(n,t,l);e.setUncontrolledState({expandedKeys:t,flattenNodes:c},!0)},e.onNodeExpand=function(t,a){var n=e.state.expandedKeys,l=e.state,c=l.listChanging,v=l.fieldNames,g=e.props,y=g.onExpand,h=g.loadData,m=a.expanded,s=a[v.key];if(!c){var E=n.indexOf(s),b=!m;if(de(m&&E!==-1||!m&&E===-1,"Expand state not sync with index check"),b?n=q(n,s):n=H(n,s),e.setExpandedKeys(n),y?.(n,{node:a,expanded:b,nativeEvent:t.nativeEvent}),b&&h){var p=e.onNodeLoad(a);p&&p.then(function(){var x=Ee(e.state.treeData,n,v);e.setUncontrolledState({flattenNodes:x})}).catch(function(){var x=e.state.expandedKeys,N=H(x,s);e.setExpandedKeys(N)})}}},e.onListChangeStart=function(){e.setUncontrolledState({listChanging:!0})},e.onListChangeEnd=function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})},e.onActiveChange=function(t){var a=e.state.activeKey,n=e.props.onActiveChange;a!==t&&(e.setState({activeKey:t}),t!==null&&e.scrollTo({key:t}),n?.(t))},e.getActiveItem=function(){var t=e.state,a=t.activeKey,n=t.flattenNodes;return a===null?null:n.find(function(l){var c=l.key;return c===a})||null},e.offsetActiveKey=function(t){var a=e.state,n=a.flattenNodes,l=a.activeKey,c=n.findIndex(function(y){var h=y.key;return h===l});c===-1&&t<0&&(c=n.length),c=(c+t+n.length)%n.length;var v=n[c];if(v){var g=v.key;e.onActiveChange(g)}else e.onActiveChange(null)},e.onKeyDown=function(t){var a=e.state,n=a.activeKey,l=a.expandedKeys,c=a.checkedKeys,v=a.fieldNames,g=e.props,y=g.onKeyDown,h=g.checkable,m=g.selectable;switch(t.which){case J.UP:{e.offsetActiveKey(-1),t.preventDefault();break}case J.DOWN:{e.offsetActiveKey(1),t.preventDefault();break}}var s=e.getActiveItem();if(s&&s.data){var E=e.getTreeNodeRequiredProps(),b=s.data.isLeaf===!1||!!(s.data[v.children]||[]).length,p=R(I(I({},te(n,E)),{},{data:s.data,active:!0}));switch(t.which){case J.LEFT:{b&&l.includes(n)?e.onNodeExpand({},p):s.parent&&e.onActiveChange(s.parent.key),t.preventDefault();break}case J.RIGHT:{b&&!l.includes(n)?e.onNodeExpand({},p):s.children&&s.children.length&&e.onActiveChange(s.children[0].key),t.preventDefault();break}case J.ENTER:case J.SPACE:{h&&!p.disabled&&p.checkable!==!1&&!p.disableCheckbox?e.onNodeCheck({},p,!c.includes(n)):!h&&m&&!p.disabled&&p.selectable!==!1&&e.onNodeSelect({},p);break}}}y?.(t)},e.setUncontrolledState=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var l=!1,c=!0,v={};Object.keys(t).forEach(function(g){if(g in e.props){c=!1;return}l=!0,v[g]=t[g]}),l&&(!a||c)&&e.setState(I(I({},v),n))}},e.scrollTo=function(t){e.listRef.current.scrollTo(t)},e}return at(i,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var d=this.props.activeKey;d!==void 0&&d!==this.state.activeKey&&(this.setState({activeKey:d}),d!==null&&this.scrollTo({key:d}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var d,u=this.state,K=u.focused,t=u.flattenNodes,a=u.keyEntities,n=u.draggingNodeKey,l=u.activeKey,c=u.dropLevelOffset,v=u.dropContainerKey,g=u.dropTargetKey,y=u.dropPosition,h=u.dragOverNodeKey,m=u.indent,s=this.props,E=s.prefixCls,b=s.className,p=s.style,x=s.showLine,N=s.focusable,S=s.tabIndex,k=S===void 0?0:S,D=s.selectable,w=s.showIcon,$=s.icon,T=s.switcherIcon,P=s.draggable,L=s.checkable,A=s.checkStrictly,_=s.disabled,M=s.motion,X=s.loadData,ue=s.filterTreeNode,fe=s.height,ne=s.itemHeight,z=s.virtual,ae=s.titleRender,ve=s.dropIndicatorRender,oe=s.onContextMenu,ge=s.onScroll,Y=s.direction,pe=s.rootClassName,re=s.rootStyle,ye=ot(this.props,{aria:!0,data:!0}),F;return P&&(rt(P)==="object"?F=P:typeof P=="function"?F={nodeDraggable:P}:F={}),f.createElement(qe.Provider,{value:{prefixCls:E,selectable:D,showIcon:w,icon:$,switcherIcon:T,draggable:F,draggingNodeKey:n,checkable:L,checkStrictly:A,disabled:_,keyEntities:a,dropLevelOffset:c,dropContainerKey:v,dropTargetKey:g,dropPosition:y,dragOverNodeKey:h,indent:m,direction:Y,dropIndicatorRender:ve,loadData:X,filterTreeNode:ue,titleRender:ae,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},f.createElement("div",{role:"tree",className:le(E,b,pe,(d={},se(d,"".concat(E,"-show-line"),x),se(d,"".concat(E,"-focused"),K),se(d,"".concat(E,"-active-focused"),l!==null),d)),style:re},f.createElement(Ve,O({ref:this.listRef,prefixCls:E,style:p,data:t,disabled:_,selectable:D,checkable:!!L,motion:M,dragging:n!==null,height:fe,itemHeight:ne,virtual:z,focusable:N,focused:K,tabIndex:k,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:oe,onScroll:ge},this.getTreeNodeRequiredProps(),ye))))}}],[{key:"getDerivedStateFromProps",value:function(d,u){var K=u.prevProps,t={prevProps:d};function a(N){return!K&&N in d||K&&K[N]!==d[N]}var n,l=u.fieldNames;if(a("fieldNames")&&(l=Oe(d.fieldNames),t.fieldNames=l),a("treeData")?n=d.treeData:a("children")&&(de(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=ft(d.children)),n){t.treeData=n;var c=vt(n,{fieldNames:l});t.keyEntities=I(se({},V,We),c.keyEntities)}var v=t.keyEntities||u.keyEntities;if(a("expandedKeys")||K&&a("autoExpandParent"))t.expandedKeys=d.autoExpandParent||!K&&d.defaultExpandParent?Me(d.expandedKeys,v):d.expandedKeys;else if(!K&&d.defaultExpandAll){var g=I({},v);delete g[V],t.expandedKeys=Object.keys(g).map(function(N){return g[N].key})}else!K&&d.defaultExpandedKeys&&(t.expandedKeys=d.autoExpandParent||d.defaultExpandParent?Me(d.defaultExpandedKeys,v):d.defaultExpandedKeys);if(t.expandedKeys||delete t.expandedKeys,n||t.expandedKeys){var y=Ee(n||u.treeData,t.expandedKeys||u.expandedKeys,l);t.flattenNodes=y}if(d.selectable&&(a("selectedKeys")?t.selectedKeys=Ie(d.selectedKeys,d):!K&&d.defaultSelectedKeys&&(t.selectedKeys=Ie(d.defaultSelectedKeys,d))),d.checkable){var h;if(a("checkedKeys")?h=be(d.checkedKeys)||{}:!K&&d.defaultCheckedKeys?h=be(d.defaultCheckedKeys)||{}:n&&(h=be(d.checkedKeys)||{checkedKeys:u.checkedKeys,halfCheckedKeys:u.halfCheckedKeys}),h){var m=h,s=m.checkedKeys,E=s===void 0?[]:s,b=m.halfCheckedKeys,p=b===void 0?[]:b;if(!d.checkStrictly){var x=Ke(E,!0,v);E=x.checkedKeys,p=x.halfCheckedKeys}t.checkedKeys=E,t.halfCheckedKeys=p}}return a("loadedKeys")&&(t.loadedKeys=d.loadedKeys),t}}]),i}(f.Component);Xe.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Ft,allowDrop:function(){return!0},expandAction:!1};Xe.TreeNode=xe;const qt=new dt("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),zt=(r,o)=>({[`.${r}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${o.motionDurationSlow}`}}}),Ut=(r,o)=>({[`.${r}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:o.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${o.lineWidthBold}px solid ${o.colorPrimary}`,borderRadius:"50%",content:'""'}}}),jt=(r,o)=>{const{treeCls:i,treeNodeCls:e,treeNodePadding:d,treeTitleHeight:u}=o,K=o.paddingXS;return{[i]:Object.assign(Object.assign({},lt(o)),{background:o.colorBgContainer,borderRadius:o.borderRadius,transition:`background-color ${o.motionDurationSlow}`,[`&${i}-rtl`]:{[`${i}-switcher`]:{"&_close":{[`${i}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${i}-active-focused)`]:Object.assign({},$e(o)),[`${i}-list-holder-inner`]:{alignItems:"flex-start"},[`&${i}-block-node`]:{[`${i}-list-holder-inner`]:{alignItems:"stretch",[`${i}-node-content-wrapper`]:{flex:"auto"},[`${e}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:d,insetInlineStart:0,border:`1px solid ${o.colorPrimary}`,opacity:0,animationName:qt,animationDuration:o.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[`${e}`]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${d}px 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${i}-node-content-wrapper`]:{color:o.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${i}-node-content-wrapper`]:Object.assign({},$e(o)),[`&:not(${e}-disabled).filter-node ${i}-title`]:{color:"inherit",fontWeight:500},"&-draggable":{[`${i}-draggable-icon`]:{flexShrink:0,width:u,lineHeight:`${u}px`,textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${o.motionDurationSlow}`,[`${e}:hover &`]:{opacity:.45}},[`&${e}-disabled`]:{[`${i}-draggable-icon`]:{visibility:"hidden"}}}},[`${i}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:u}},[`${i}-draggable-icon`]:{visibility:"hidden"},[`${i}-switcher`]:Object.assign(Object.assign({},zt(r,o)),{position:"relative",flex:"none",alignSelf:"stretch",width:u,margin:0,lineHeight:`${u}px`,textAlign:"center",cursor:"pointer",userSelect:"none","&-noop":{cursor:"default"},"&_close":{[`${i}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:o.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:u/2,bottom:-d,marginInlineStart:-1,borderInlineEnd:`1px solid ${o.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:u/2*.8,height:u/2,borderBottom:`1px solid ${o.colorBorder}`,content:'""'}}}),[`${i}-checkbox`]:{top:"initial",marginInlineEnd:K},[`${i}-node-content-wrapper, ${i}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:u,margin:0,padding:`0 ${o.paddingXS/2}px`,color:"inherit",lineHeight:`${u}px`,background:"transparent",borderRadius:o.borderRadius,cursor:"pointer",transition:`all ${o.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:o.controlItemBgHover},[`&${i}-node-selected`]:{backgroundColor:o.controlItemBgActive},[`${i}-iconEle`]:{display:"inline-block",width:u,height:u,lineHeight:`${u}px`,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${i}-unselectable ${i}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${i}-node-content-wrapper`]:Object.assign({lineHeight:`${u}px`,userSelect:"none"},Ut(r,o)),[`${e}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${o.colorPrimary}`}},"&-show-line":{[`${i}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:u/2,bottom:-d,borderInlineEnd:`1px solid ${o.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${i}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${e}-leaf-last`]:{[`${i}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:`${u/2}px !important`}}}}})}},Wt=r=>{const{treeCls:o,treeNodeCls:i,treeNodePadding:e}=r;return{[`${o}${o}-directory`]:{[i]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:e,insetInlineStart:0,transition:`background-color ${r.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:r.controlItemBgHover}},"> *":{zIndex:1},[`${o}-switcher`]:{transition:`color ${r.motionDurationMid}`},[`${o}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${o}-node-selected`]:{color:r.colorTextLightSolid,background:"transparent"}},"&-selected":{[`
            &:hover::before,
            &::before
          `]:{background:r.colorPrimary},[`${o}-switcher`]:{color:r.colorTextLightSolid},[`${o}-node-content-wrapper`]:{color:r.colorTextLightSolid,background:"transparent"}}}}}},Vt=(r,o)=>{const i=`.${r}`,e=`${i}-treenode`,d=o.paddingXS/2,u=o.controlHeightSM,K=st(o,{treeCls:i,treeNodeCls:e,treeNodePadding:d,treeTitleHeight:u});return[jt(r,K),Wt(K)]},nn=it("Tree",(r,o)=>{let{prefixCls:i}=o;return[{[r.componentCls]:pt(`${i}-checkbox`,r)},Vt(i,r),yt(r)]}),Xt=r=>{const{prefixCls:o,switcherIcon:i,treeNodeProps:e,showLine:d}=r,{isLeaf:u,expanded:K,loading:t}=e;if(t)return f.createElement(ht,{className:`${o}-switcher-loading-icon`});let a;if(d&&typeof d=="object"&&(a=d.showLeafIcon),u){if(!d)return null;if(typeof a!="boolean"&&a){const c=typeof a=="function"?a(e):a,v=`${o}-switcher-line-custom-icon`;return Te(c)?Pe(c,{className:le(c.props.className||"",v)}):c}return a?f.createElement(Ct,{className:`${o}-switcher-line-icon`}):f.createElement("span",{className:`${o}-switcher-leaf-line`})}const n=`${o}-switcher-icon`,l=typeof i=="function"?i(e):i;return Te(l)?Pe(l,{className:le(l.props.className||"",n)}):l!==void 0?l:d?K?f.createElement($t,{className:`${o}-switcher-line-icon`}):f.createElement(Lt,{className:`${o}-switcher-line-icon`}):f.createElement(bt,{className:n})},an=Xt;export{Ct as F,an as S,Xe as T,Ue as _,Vt as g,nn as u};
